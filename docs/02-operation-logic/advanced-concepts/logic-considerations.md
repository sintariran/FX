# ロジック検討

## 📋 概要

ロジック検討は、実運用で発見された課題を分析し、オペレーションロジックの改善を図るプロセスです。時間軸の切り替わり、方向転換、予知と実際の動きの関係などを詳細に検討します。

## 🔍 発見された課題

### 1. 時間軸切り替わりの問題
**途中で1分、5分と切替ったのちに再度15分に戻ったりする際に、方向が細かく入れ替わることが起こる**

### 2. 表示上の問題
**表示上の問題として、時間の切替りが同じ方向への連続転換として表示されている箇所がある**

### 3. 予知残足0の問題
**予知残足0のタイミングが多くて、行行状態だと意図しないタイミングまでトップが出てしまう。予知価格等で絞っていても。**

## 📊 加重Osによる判定（4230）

### 転換条件の整理

#### 基本的な転換パターン
1. **差分方向へ加重Os転換**
2. **差分方向と予知価格方向へなましの増減**
3. **なまし方向へ加重Os転換**

#### 予知残足0での転換パターン
1. **予知残足0と平足の方向と逆方向へのなましの増減**
2. **予知残足0と平足の方向と逆方向になまし方向への予知価格転換**
3. **予知残足0と平足の方向と逆方向に差分方向への予知価格転換**
4. **予知残足0と平足の方向と逆方向への加重Os転換**

### シンプルな判定ルール
- **帰の時に加重Os転換がきたら返す**
- **行の時に加重Os転換がきたら行く**

## 🎯 15分と5分の関係性

### 15分の方向性の中での判断
**15分の方向性の中で、5分多段か転換かの判断**

### 15分行の中での5分の動き
**15分行の中で5分が逆方向に返す時に1分が5分と同じ方向に向かっていれば、その方向へ返す？**

#### 判断基準
- 予知を見ることで15分の抵抗線を超えるか否かを判断する
- 15分予知、差分と合わせて判断する

## 📈 転換と多段の判定

### 15分が返すことが確定するまでの判断

#### 5分の状態確認
1. **5分の逆トップ（多段成立）**
2. **5分の転換確定**

#### 1分による詳細判定
**5分の逆トップに対しては、1分のトップ成立かトップ非成立（抜ける）かを見る**
- 1分が本なら、転換確定
- 1分が逆なら、抵抗線による逆トップ

### 特殊な状況
1. **15分のもみ**
   - 15分の確定が入った足で返してくるところ

2. **予知価格と基準線価格の関係**
   - 予知価格が15分基準線価格を超えるというタイミングでの判断

## 💡 改善の方向性

### 短期的改善
1. **時間軸切り替わりのスムーズ化**
2. **表示問題の修正**
3. **予知残足0の扱い方の最適化**

### 中期的改善
1. **加重Osの重み付け調整**
2. **時間軸間の関係性の精緻化**
3. **転換・多段判定の精度向上**

### 長期的改善
1. **新たな判定要素の追加**
2. **機械学習による最適化**
3. **リアルタイム適応システム**

## 🔧 実装上の注意点

### パフォーマンス
- **処理時間**: 1hで8min
- 最適化の余地あり

### 判定の優先順位
1. **安全性重視の判定**
2. **精度と機会のバランス**
3. **リスク管理の組み込み**

## 📊 検証項目

### バックテスト
1. **各パターンの成功率**
2. **時間軸別のパフォーマンス**
3. **市場環境別の適応性**

### リアルタイム検証
1. **遅延の影響**
2. **スリッページの考慮**
3. **実運用での調整**

---

## 📅 出典
- **ファイル**: 20190918_ロジック検討.txt（2019年9月18日）
- **カテゴリ**: オペレーションロジック・高度な概念