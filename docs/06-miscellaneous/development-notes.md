# 開発メモ・技術ノート

## 📋 概要

開発過程で記録された技術的なメモ、デバッグ情報、実装上の課題と解決策をまとめた資料です。共通関数化、パッケージ管理、システムの問題点などが含まれます。

## 🔧 共通関数化（2019年10月7日）

### 対象項目
- **パッケージ、ロジックシグナル、インジケータ、バリュー**

### 実装方針
条件列を指定して値を取得：
- **パッケージ値取得**: 保持配列（hold_row）より参照
- **ロジックシグナル**: 行をそのまま参照
- **インジケータ**: GetIndicatorvalueを使用
- **バリュー**: そのまま値を取得

返り値：値とステート

### 変換処理
- FirstSetPackageSettingState（#の変換）
- odudの変換用関数の作成

### 統合処理
- 取得した引数を1本化した関数へ渡す
- 1本化した関数は関数内で使用する関数のタイプをセレクトして実行
- 出力は共通関数で出力前絞込処理
- 配列への格納処理

### 例外処理
インプット処理をしていない（不要）：
- cross
- band

type_yochiはrangeを読んでいる

### 特記事項
- 5268-1をちゃんと出す
- 5268 レンジ幅シートから抜いた

## 🐛 システムの問題点（2019年10月23日）

### 発見された問題
1. **パッケージ出力機能の問題**
   - 変更された箇所だけ出力する機能が正常に動作していない

2. **ヘッジ機能追加に関しては、ヘッジが動かない**
   - エントリーと同時に実行してもヘッジが入らなかった
   - 時刻の絞り機能の問題か？

3. **データ関連の問題**
   - 空データの検知
   - チェック結果出力

4. **タイミングの問題**
   - 平均足のステータス更新がエントリーよりも遅い
   - 取引用EAは計算処理に1分遅れがある

5. **データ形式の問題**
   - RLが残足数のはずが日付と時刻になっている

### 残作業
- 残5グループ
- スプレッド加味

### 参照ID
- 191^4-1483
- 191^4-1484

## 📊 時間・周期による切り分け（2020年1月24日）

### 基本概念
**価格の位置が各時間毎にどの線の間にいて、どの線に向かっているかで周期の特定をする**

### 平均足の等速予知
- 今足と前足の到達距離差分が小さい時に今足は前足をトリガーとして返す
- 前足の最終方向判断が今足につながるかの考え方
- 行行方向に関しても、平均足予知によるなましの確認を行う
- 行行側は今足予知を前足予知が越えて伸びると行っているかの判断

### 基本ベースとしての確定での見方
- 実勢と平均の位置関係で見分ける
- 平足予知はそろっていない状態ではいかないの逆説条件として使った方がよい

### 線との位置関係
- どの線の間にいるか
- どの周期の行帰を見るべきかが決まる
- 線との位置関係（10〜、10〜30、30〜90、90〜180、180〜）

### もみの判定
- もみ: 191^50-33
- もみ以外: 191^51-37

### 30分なましの考慮
- 30分なまし含めて15分を見る？
- 30分の方向性と合わせてみる

### 判定ルール
- 10の上の場合、30とそろわないと下は出さない
- 10の上の場合、上なら上
- もみの場合、30の方向で判断する（細かく取引しない）

### 抵抗線の判定
前足が抜けた状態で抜け方向を出しているか、抜けていない状態で抜け方向を出しているのか
- 抵抗線にたいして抜けているのか否か
- 何を抵抗線として見るか？
  - 前足：期間10
  - 前々足：期間30/90
- どの周期のどの抵抗で止まるのかを予知の表示として出す

### 周期特定信号
- 44120行目〜
- 191^6-3710 S ,5m:2713
- 191^3711 M ,5m:2714
- 191^3712 L ,5m:271

## 📈 周期の優先順位（2020年1月27日）

### 周期の並び順
```
1M10>1M30>5M10>1M90>5M30>15M10>1M180>15M30>5M90>5M180>15M90>15M180
```

### ファイルパス
```
input//operation2//OperationSignal//draw//bktest_draw//
```

### 参照ID
- 191^8-4760
- 191^8-4761
- 191^8-4762
- 191^8-4771

### 検討事項
- いくつを超えたら（判定基準）

## 💡 技術的な考慮事項

### パフォーマンス最適化
1. **共通関数化による処理効率化**
2. **配列処理の最適化**
3. **キャッシュの活用**

### エラー処理
1. **空データの適切な処理**
2. **タイミング問題の解決**
3. **データ形式の統一**

### 将来の改善点
1. **リアルタイム処理の改善**
2. **ヘッジ機能の修正**
3. **出力機能の正常化**

---

## 📅 出典
- **ファイル**: 20191007_メモ.txt（2019年10月7日）
- **ファイル**: 20191023_メモ.txt（2019年10月23日）
- **ファイル**: 20200124_メモ.txt（2020年1月24日）
- **ファイル**: 20200127_メモ.txt（2020年1月27日）
- **カテゴリ**: その他・雑記