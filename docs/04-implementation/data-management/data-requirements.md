# データ要件定義

## 📋 概要

データ要件定義は、オペレーション（OP）実行に必要なすべてのデータを体系的に洗い出し、管理・検証する仕組みです。データの種類、形式、取得方法を明確に定義し、システム全体の整合性を保ちます。

## 🎯 データ要件の洗い出し

### 基本的な問い
**何のデータが必要か洗い出しをしたか**
- OPをやるにあたって、何のデータが必要になるかというのを、その種類を洗い出したか
- 区分を分けたか。分けて管理しているか
- そのデータはすべてテーブルに乗っているか
- 最終的にはそのデータからすべて紐づいているか

### データの属性
1. **データ数**: 何個あるか
2. **取得方法**: 基本的な取り方
3. **有効桁数**: データの精度
4. **前提条件**: データをとってくる前提はどこにある

## 📊 データ定義の課題

### 未決定事項
**何の素材を何個どういう形式で使うかという定義をしていない**
- PKG、1万桁、指標は決まっている
- 値のところで決まっていないものが残っている

### 必要な定義手順
1. **何をどういう形でとってくるかをまず決める**
2. **その次にどこからとってくるのか**
3. **BT、RB、RLのそれぞれのデータはどこからとってくる**
4. **何個取らなきゃいけないのがあって、その条件が、どの形で保存する**

## 🔍 データ種別と管理

### データタイプ
1. **BT（バックテスト）**
   - 完全なデータセット
   - 途中計算を含む

2. **RB（リアルバックテスト）**
   - BTと同様のデータを入れていく
   - ただし途中計算は入れていない

3. **RL（リアル）**
   - 実運用データ
   - リアルタイム処理

### データ処理フロー
1. **素材がとれたら、PKGの基準を作る**
2. **素材がとれてるか、ちゃんと処理できてるか、ちゃんと出力できてるか**
3. **そこで引っ張ってる条件というのはちゃんと追加されるよな**

## 🏗️ PKG（パッケージ）設計

### PKGの階層構造
- **ルートの階層分け**
- **何のエンジンが必要で、何のPKGが何種類必要**
- **条件はどうなっている**
- **PKGの階層も一致しているよな**

### PKG作成時のチェック項目
1. **欠損してないか**
2. **足が何本必要か**
3. **機械で走らせられるチェック**

### 出力パターンの管理
- **吐き出されるときもルートでONOFFついている**
- **吐き出されるパターンも決まっている**
- **それ以外の数値が出てるか出ていないか決まっていないか**

## ✅ 検証システム

### 階層別検証
**RLの答とBTの答が階層ごとにでているはず**
- 条件もなぜその条件が入っているかの紐づけ
- PKGを検証するための区分

### エラー要因
**全体の中でずれるというのが、処理おちやメモリのせいでしかないはず**
- 表現方法が決まっていて、置き換え
- 考える余地はない、確認だけだから

### 自動検証
1. **新しくシステムを作ったときにPKGでもともとあるチェック項目でチェックできる**
2. **PKGのチェック項目をどんどん足していって作っていけるようにする**
3. **どのルートには素材が何がはいってなきゃいけない⇒機械に全部持ってこさせる⇒PKGと比較してチェックする**

## 🌍 他通貨対応

### 他通貨データの扱い
- **他通貨に関しては他通貨の要素からもってくればいい**
- **軸通貨を置いたときに、そこに何が入ればいいというのは決まるんじゃないか**

## 💡 システム設計の原則

### 整合性チェック
1. **PKGの内容と、設計図の整合性でチェックできる**
2. **一回情報が入るようにしておけば、ルートの部分はどうなってなきゃいけない**
3. **チェックはどこをちぇっくするかという場所が特定されればいい**

### PKGの役割分類
**PKGのエンジンとして見るものなのか、素材として見るものなのか**
- エンジン：処理ロジック
- 素材：入力データ

## 🎯 データ要件のまとめ

### 必須定義項目
1. **データの種類と数量**
2. **データ形式と有効桁数**
3. **取得元と取得方法**
4. **保存形式と更新頻度**
5. **依存関係と紐付け**

### 品質保証
1. **完全性**: ヒストリカルが欠損なくあるか
2. **一貫性**: 入ってくる条件が全一致しているか
3. **正確性**: 有効桁数と精度の保証
4. **追跡可能性**: データの出所と変換履歴

---

## 📅 出典
- **ファイル**: 20191010_何のデータが必要か洗い出しをしたか.txt（2019年10月10日）
- **カテゴリ**: システム実装・データ管理