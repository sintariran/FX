# 表示器仕様

## 📋 概要

表示器は、取引判断に必要な各種情報をリアルタイムで可視化するシステムです。ランプ表示、予知価格表示、区分表示など、多角的な市場分析を支援する機能を提供します。

## 🎯 主要機能

### 取引（EA）関連
- **週マタギ判断**
- **スワップ判断**

## 💡 ランプ表示機能

### 実装済みランプ
1. **突発ランプ**（接続情報見直し）
   - 急激な価格変動の検知
   - リアルタイム警告

2. **ピンバーランプ**（接続情報見直し）
   - ピンバー形成の検知
   - 転換シグナルの可視化

3. **転換ランプ**（追加）
   - 線と線の間で早期転換する場合
   - 転換タイミングの明確化

4. **加速ランプ**
   - 価格加速の検知
   - トレンド強度の表示

### 修正・追加予定のランプ
1. **抵抗線予知レンジ**
   - スタートとゴールの色分け
   - 各時間毎の表示を描画

2. **もみランプ**（接続情報見直し）
   - どの時間がもんでいるのか
   - もみ状態の可視化

3. **量**
   - 新規と長期が分かるように表示
   - ボリューム分析の支援

4. **確認ポイントランプ**
   - 重要な確認ポイントの表示

## 📊 表示内容の詳細

### 予知機能
- **予知価格と予知時刻の表示**

### 時間軸表示
- **表示対象時間軸**
  - 4時間
  - 1時間
  - 30分

### 追加表示項目
- **スルー部分も信号出力する**
- **最高、最安部分に線を引く**
- **区分けをする（180行帰）**
- **時間もみを追加する**
- **4Hのトップ**

## 🔍 転換判定ロジック

### 乖離判定
**前足乖離確定時に今足のOs増減方向が乖離方向を向いている**

### トリガー継続
**トリガーを継続させた際に今足と前足が同方向で合致している状態で、今足Os増減が逆向き**
- 継続トリガーはその時の方向性を向いている

### 状態管理
1. **今足のトリガー継続状態**
2. **今足の乖離成立状態**
   - 今足Os増減方向と今足平均足の乖離確認実行
3. **今足の乖離非成立状態**
   - 今足Os増減の転換トリガー時のみ適用

### 実例
**2019/10/7 4:07の事例**
- 乖離後、平均転換成立しOsが来る前に逆方向乖離が成立
- その後乖離が解消されてOsの方向に伸ばしている
- Osの転換成立時に逆方向に乖離が成立しているため、Osの方向への転換判定が出せていない

## 📈 15分Os増減の方向判定

### 判定要素
- **多段転換**
- **残足確認**
- **平均足方向**

### 転換条件
- **転換している足で残足低**
- **多段転換状態であれば、転換しない**
  - 先足残足なし → 転換
  - 先足残足あり → 多段

### 特殊ケース
**残足がない状態でも増減に対して同逆の変換が成立している場合**
- 減しながら価格もすでに減している状態のため、その方向にそのまま行く
- Os増減でOsが下増の時に価格と乖離なく増していれば、残足がないとなっていても、転換のタイミングでなく0転更新で伸ばすところの意味になる

## 🎯 TOPの絞り込み

### 絞り込み要素
1. **残足は時間帯の絞り込み**

2. **Osの増減及び上下の方向は価格との同逆を取っているため、基本的に価格の動きと同一**
   - 増減の転換、0点の更新自体はその抜け方向に基本的に進む
   - そのタイミングで乖離が発生して価格の動きとずれることはある
   - 転換、更新のタイミングで価格の動きとの同逆を取ったもので、流れの方向性を見る必要がある

3. **更新、転換の前段としての残足がない状態でのトップの向きはどちらか？**
   - 価格が進んでいる方向からトップをつけて転換してくる／そのまま更新していくタイミング
   - 前足の乖離方向を見て判断する

### 課題
- 残足なし状態を内包の時間で重ねていくことはできた
- ただし、その成立数が多い
- また、その成立区間を終わりにする要素は何か？

## 🔧 1分トップ判断

### 白バンド内での1mトップ判断
- **Lv3,5交点成立**
- **先先足多段判断方向との同逆確認**

### 1mトップ判断の改善
- 分類分け（目的の切り分け）
- 分類ごとの見方（見る順番）

## 💻 実装上の注意点

### パフォーマンス
1. **リアルタイム更新の最適化**
2. **描画処理の効率化**
3. **メモリ使用量の管理**

### ユーザビリティ
1. **直感的な表示**
2. **カスタマイズ性**
3. **アラート機能**

---

## 📅 出典
- **ファイル**: 20200205_表示器内容.txt（2020年2月5日）
- **ファイル**: 20200418_表示器.txt（2020年4月18日）
- **ファイル**: 20200418_表示器2.txt（2020年4月18日）
- **ファイル**: 20200503_表示器.txt（2020年5月3日）
- **カテゴリ**: システム実装・表示システム